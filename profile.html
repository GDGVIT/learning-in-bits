<!DOCTYPE html>
<html>

<head>
	<title>Profile</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.0/css/bootstrap.min.css"
		integrity="sha384-PDle/QlgIONtM1aqA2Qemk5gPOE7wFq8+Em+G/hmo5Iq0CCmYZLv3fVRDJ4MMwEA" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
		integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
	<script type="text/javascript" src="assets/js/lib/jquery-2.2.4.min.js"></script>
	<link rel="stylesheet" type="text/css" href="profile.css">
</head>

<body>
	<div class="container">
		<div class="row">
			<div class="col-4">
				<div class="img">
					<img class="img-responsive" src="Assets/learninginbits.svg">
				</div>
			</div>
		</div>
		<div class="profile">
			<div class="row">
				<div class="col-7"></div>
				<div class="col-2">
					<img class="Person" src="Assets/Person Image.png">
					<!-- <img class="Person1" src="Assets/Ellipse3.png">
			<img class="Person2" src="Assets/Ellipse3@2x.png">
			<img class="Person3" src="Assets/Ellipse3@3x.png"> -->

				</div>
				<!-- <div class="col-5"></div> -->
			</div>
			<div class="details">
				<i class='fa fa-pen'></i>
				<div>
					<p class="name">Full Name</p>
					<div class="edit">
						<input type="text" placeholder="" id="fullname">
					</div>
					<p class="subscript">Full name</p>

				</div>
				<div>
					<p class="email">Email</p>
					<div class="edit">
						<input type="text" placeholder="" id="email">
					</div>
					<p class="subscript">Email</p>


				</div>
				<div>
					<p class="password" style="visibility:hidden;">Password</p>
					<div class="edit">
						<input type="text" placeholder="Confirm password" id="confirmpass">
					</div>
					<div class="edit">
						<input type="text" placeholder="New password" id="newpass">
					</div>
					<div class="edit_last">
						<input type="text" placeholder="Confirm new password" id="confirmnewpass">
					</div>

					<p class="subscript" style="display:none;">Password</p>


				</div>
				<div>
					<a href="quotepage.html" style="text-decoration: none">
						<p class="interests"> Tag 1, Tag 2, Tag 3, Tag 4, Tag 5, Tag 6</p>
						<p class="subscript">Interests</p>
					</a>
				</div>

				<button class="bt"> Log Out </button>
			</div>
		</div>

	</div>

	<script src="profile.js"></script>
	<script>
		let ob = {}
		$(document).ready(function () {
			//Ajax to pass token as page loads
			$.ajax({
				url: 'https://stark-retreat-48003.herokuapp.com/view_profile',
				type: 'POST',
				data: JSON.stringify({
					"token": ""
				}),
				contentType: 'application/json',
				dataType: 'json',
				success: (msg) => {
					console.log(msg)
				},
				error: (err) => {
					console.log(err)
				}
			})
			$.ajax({
				url: 'https://stark-retreat-48003.herokuapp.com/view_profile',
				method: 'GET',
				contentType: 'application/JSON',
				success: function (msg) {
					console.log(msg)
				},
				error: function (err) {
					console.log(err)
				}
			})

			$(".details").on("click", ".fa-check", function (e) {
				ob.token = ""
				ob.fullname = document.getElementById("fullname").value;
				ob.email = document.getElementById("email").value;
				ob.password = document.getElementById("confirmpass").value;
				ob.new_password = document.getElementById("newpass").value;
				ob.confirm_new_password = document.getElementById("confirmnewpass").value;

				console.log(JSON.stringify(ob))
				$.ajax({
					url: 'https://stark-retreat-48003.herokuapp.com/edit_profile',
					type: 'POST',
					data: JSON.stringify(ob),
					contentType: 'application/json',
					success: function (msg) {
						console.log(msg)
					},
					error: function (err) {
						console.log(err)
					}

				})

				//forgot password
				$.ajax({
					url: 'https://stark-retreat-48003.herokuapp.com/edit_profile',
					type: 'POST',
					data: JSON.stringify({
						"username": document.getElementById("fullname").value,
						"password": document.getElementById("confirmpass").value,
						"new_password": document.getElementById("newpass").value,
						"confirm_new_password": document.getElementById("confirmnewpass")
							.value

					}),
					contentType: 'application/json',
					success: function (msg) {
						console.log(msg)
					},
					error: function (err) {
						console.log(err)
					}

				})




			})
		})
	</script>

</body>

</html>